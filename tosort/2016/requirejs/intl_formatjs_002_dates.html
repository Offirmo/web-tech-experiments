<!doctype html>
<!-- html base 004 template -->
<!-- js base 002 template -->
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

	<title>Intl test 002 - Format.js core lib : relative times</title>
	<meta name="description" content="">
	<meta name="author" content="Offirmo">

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- favicons -->
	<!-- For Modern Browsers with PNG Support -->
	<link rel="icon" href="misc/favicon_16x16.png" type="image/png" />

	<!-- style -->
	<link href="../bower_components/pace/themes/blue/pace-theme-flash.css" rel="stylesheet" />
	<style>
	 /* ... */
	</style>

	<!-- js -->
	<script src="../bower_components/pace/pace.min.js"></script>
	<script>
		console.log('hello from header !');
	</script>
	<script data-main="misc/components.js" src="../bower_components/requirejs/require.js"></script>

</head>
<body>

<div id="content">
	<div class="container">
		<h1 id="header">Intl test 002 - Format.js core lib : relative times</h1>
		<p>Loading and calling <a href="http://formatjs.io/">Format.js</a> <a href="http://formatjs.io/github/#core">core</a> lib <a href="https://github.com/yahoo/intl-relativeformat">intl-relativeformat</a>...</p>
		<p><strong>(Results are sent to console)</strong></p>
	</div> <!-- /container -->
</div> <!-- /content -->

<noscript>Your browser either does not support JavaScript, or has it turned off.</noscript>
<script>

	console.log('hello from body !');

	main = function()
	{
		console.log('Starting rsrc load...');
		require(
		[
			'lodash',
			'intl-messageformat',
			'intl-relativeformat'
		],
		function(_, IntlMessageFormat, IntlRelativeFormat, format_cache) {
			// due to how we wrote component.js, we know that document is fully loaded
			console.log('load done !');

			// example taken from IntlRelativeFormat readme
			var rf1 = new IntlRelativeFormat('en-US');
			var rf2 = new IntlRelativeFormat('fr-FR');

			var posts = [
				{
					id   : 1,
					title: 'Some Blog Post',
					date : new Date(1426271670524)
				},
				{
					id   : 2,
					title: 'Another Blog Post',
					date : new Date(1436478870524)
				}
			];

			posts.forEach(function (post) {
				console.log('TEST en-US :', rf1.format(post.date));
				console.log('TEST fr-FR :', rf2.format(post.date));
			});
			// => "3 hours ago"
			// => "1 hour ago"
		});
	};
</script>

</body>
</html>
